# 附录1 网络

## A1.1 前言
本章描述网络相关基础知识。

## A1.2 网络层次结构

![Snip20161025_5](/assets/Snip20161025_5.png)

|层次|功能|
|-|-|
|物理层|将信息转化成0、1的序列流数据发送和接收|
|数据链路层|负责链路建立、将数据按帧发送和接收、已经错误检测和恢复|
|网络层|负责网络标识定位、路由|
|传输层|链路复用、传输控制|

有了物理层和数据链路层，就可以实现点对点的通信。

端对端，点对点的概念

### A1.2.1 物理层
常见介质有铜绞线、光缆、无线介质（电波、微波、红外线）

物理层主要负责基本的信息传输以及传输控制工作。
人们可以使用电线来进行传输，也可以使用光纤来进行传输
对于不同的介质，产生的信号也是不同的，物理层就是要规定介质和信号的规范。

常见接口协议：
RS-232、RJ45、RJ11、FDDI、IEEE802.11

### A1.2.2 链路层
链路层的主要功能是将物理层的比特流组合成帧。

链路层主要的协议有：
Point-to-Point Protocal; PPP点到点
Ethernet; 以太网
High-Level Data Link Control Protocal;HDLC高级链路控制协议
Frame Relay; 帧中继
Asynchronous Transfer Mode;ATM------无线局域网访问控制方法与物理层规范

### A1.2.3 网络层
网络层解决端到端传输
![Snip20161025_6](/assets/Snip20161025_6.png)
网络层常见协议：
IP、ICMP、IGMP、ARP、RARP
x.25
ISDN
OSPF

### A1.2.4 传输层
传输层是工作在端到端层次的协议，传输有两个问题：
- 多个应用使用相同的网络传输，解决通道复用问题。
- 在网络稳定性差时，保证传输的准确性。

这里提到端到端的概念，端到端的概念区别于点到点，网络层以下是点到点的通信。而传输层开始则是端到端的通信。

常见协议：
TCP、UDP、SPX

### A1.2.5 应用层
应用层一般指应用实体，是一个提供了具体服务的应用程序，客户端和服务器程序之间遵循的协议都称之为应用层协议。比如QQ的服务器，就是一个应用层实体。而QQ和QQ服务器通信的格式报文，是腾讯公司规定的一种协议，如果你写一个程序和QQ服务器通信，但是不遵守这个协议的话，那QQ服务器是不会应答你的客户端程序的。

有非常多著名的应用成服务：
DNS（目录服务）
DHCP（目录管理服务）
HTTP（资源服务）
FTP（文件服务）
EMAIL（通信服务）SMTP/POP
TELNET（远程登录服务）

### A1.2.6 网络层次协议图解
![network](/assets/network.jpg)

### A1.2.7 端到端通信过程
![Snip20161025_7](/assets/Snip20161025_7.png)

## A1.3 常见网络设备
中继器(repeater)
集线器（HUB）
交换机（switch)
路由器（router）
网卡（interface)
网桥（bridge）
网关（gateway）
调制解调器（moden）

## A1.4 常见概念
客户端
服务器
MTU 1500
TCP/UDP
局域网
广域网
ip地址：四个字节(IPV4),ipv6使用16字节来表示
MAC地址：网卡自带的硬件地址
端口：非负的整数范围是0～65535
URL：唯一资源定位
web服务器：提供网页浏览服务器，apache, nginx, IIS
dns：域名解析系统
应用层网关
打洞：
长连接：
短连接
广播
多播（组播）
流
数据报
连接和无连接

## A1.5 报文格式
### A1.5.1 以太网帧
![Snip20161025_8](/assets/Snip20161025_8.png)

### A1.5.2 IP报文
![Snip20161025_9](/assets/Snip20161025_9.png)

### A1.5.3 UDP
![Snip20161025_10](/assets/Snip20161025_10.png)

### A1.5.4 TCP
![Snip20161025_11](/assets/Snip20161025_11.png)

### A1.5.5 总揽
![Snip20161025_12](/assets/Snip20161025_12.png)

## A1.6 Socket编程接口
socket不属于网络任何一层，它是一个编程接口，直接调用传输层、ip层或者是链路层来实现网络通信也是可以的，但是调用接口有些复杂，socket网络编程接口就是为了简化网络编程的库。

socket API适用于所有网络编程。

![Snip20161025_13](/assets/Snip20161025_13.png)

![Snip20161105_2](/assets/Snip20161105_2.png)
